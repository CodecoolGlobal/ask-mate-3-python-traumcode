{% extends 'layout.html' %}

{% block head %}
    <title>{{ show_question.title }}</title>
{% endblock %}


{% block body %}
<div class="text-center container-show-question-and-comments">
<div class="box">
{% for question in show_question %}
    <h2>{{ question.title }}</h2>
<hr>
    <p>{{ question.message }}</p>
{% endfor %}


{% for message in get_flashed_messages() %}
    <h3 class="alert-message">{{ message }}</h3>
{% endfor %}

<div class="grid-tags">
    <small><strong>Tags:</strong></small>

    {% for tag in question_tags_by_q_id %}
    <small class="tag">{{ tag['name'] }}<form action="{{ url_for('delete_tag',question_id=question_id, tag_id=tag['id'] ) }}" method="POST">
            <button class="x" type="submit">x</button>
        </form></small>
     {% endfor %}

</div>


<div class="container-for-buttons"><br>
    <div class="question-buttons1">
        <a class="text-decoration2" href="{{url_for('edit_question', question_id=question_id)}}">Edit this question</a>
    </div>
    <div class="question-buttons2">
        <form action="{{ url_for('delete_question', question_id=question_id) }}" method="POST">
            <button class="submit-button" type="submit">Delete Question!</button>
        </form>
    </div>
    <div class="question-buttons3">
        <a class="text-decoration2" href="{{ url_for('add_answer', question_id=question_id) }}">Add answer</a>
    </div>
    <div>
        <a class="text-decoration2" href="{{ url_for('add_comment_to_question', question_id=question_id) }}">Add comment</a>
    </div>
    <div class="question-button4">
        <a class="text-decoration2" href="{{ url_for('add_tag_to_questions', question_id=question_id) }}">Add tag</a>
    </div>

</div>
<hr>

<div class="container-comments-for-question">
    {% if comments_for_question %}
        <h3>Comments:</h3>
    {% else %}
    {% endif %}
    {% for comment in comments_for_question %}
        <small>{{ comment['submission_time'] }}</small>
        <p>{{ comment['message'] }}</p>
        <hr>
    {% endfor %}
</div>

</div>
</div>



<div class="container-answers-and-comments">
<div class="box-answers-comments">
{% if len_answers > 1 %}
<h3 class="margin-top"> {{ len_answers }} answers </h3>
<hr>
{% elif len_answers > 0 %}
<h3 class="margin-top"> {{ len_answers }} answer </h3>
<hr>
{% endif %}

    {% for item in show_answers %}
        <small>{{item.submission_time}}</small><br>
        <p><strong>A: </strong>{{ item.message }}</p>
        
        {% if item.image %}
        <figure><a href="{{ url_for('static', filename='images/' + item.image) }}" target="_blank"><img  src="{{ url_for('static', filename='images/' + item.image) }}" height="150"></a></figure><br>
        {% else %}
        <figure></figure><br>
        {% endif %}

        <form action="{{ url_for('vote_up_answer', answer_id=item.id) }}" method="post">
            <button type="submit">▲</button>
        </form>
        <small>&nbsp&nbsp&nbsp{{ item.vote_number }}</small>
        <form action="{{ url_for('vote_down_answer', answer_id=item.id) }}" method="post">
            <button type="submit">▼</button>
        </form>

        <div class="container-for-buttons">
            <div>
                <a class="text-decoration2" href="{{ url_for('edit_answer', answer_id=item.id) }}">Edit answer</a>
            </div>
            <div>
                <a class="text-decoration2" href="{{ url_for('add_comments_to_answer', answer_id=item.id) }}">Add comment</a>
            </div>
            <form action="{{ url_for('delete_answer', answer_id=item.id) }}" method="POST">
                <button class="submit-button" type="submit">Delete this answer!</button>
            </form>
        </div>
        <hr>
        <div class="container-comments-for-question">
           {% for comment in item['comments'] %}
                <p>{{ comment['message'] }}</p>
               <small>{{ comment['submission_time'] }}</small>
               <hr>
            {% endfor %}
        </div>
    {% endfor %}



</div>
</div>
    
    <a class="text-decoration-return-button text-decoration" href="{{ url_for('main_page') }}"><img src="{{url_for('static', filename='/images/back.svg')}}"> Return to The List</a><br><br>


{% endblock %}